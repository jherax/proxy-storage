{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4abd76968691b79868f5","webpack:///./src/proxy-storage.js"],"names":["proxy","localStorage","window","sessionStorage","cookieStorage","memoryStorage","checkEmpty","key","Error","WebStorage","storageType","hasOwnProperty","Object","defineProperty","configurable","enumerable","writable","value","JSON","stringify","__storage","setItem","getItem","parse","removeItem","clear","isAvaliable","storage","currentStorageName","configStorage","get","set","default","$cookie","document","cookie","api","days","path","expires","date","Date","setTime","getTime","toUTCString","encodeURIComponent","nameEQ","split","find","findCookie","trim","substring","length","decodeURIComponent","eq","indexEQ","forEach","indexOf","toString","findItem","item","hashtable","getStoreFromWindow","push","setStoreToWindow","index","findIndex","splice","store","self","name","Array","e","isStorageAvailable","storageObj","data","storageAvaliable","init","keys","some"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;ACtCA;;AAEA;;;;;;;;;;;;;;;;AAgBA;AACA;;AAEA;;;;;;;;;;;AAWA,KAAMA,QAAQ;AACZC,iBAAcC,OAAOD,YADT;AAEZE,mBAAgBD,OAAOC,cAFX;AAGZC,kBAAeA,eAHH;AAIZC,kBAAeA;AAJH,EAAd;;AAOA;;;;;;;AAOA,UAASC,UAAT,CAAoBC,GAApB,EAAyB;AACvB,OAAIA,OAAO,IAAP,IAAeA,QAAQ,EAA3B,EAA+B;AAAE;AAC/B,WAAM,IAAIC,KAAJ,CAAU,mCAAV,CAAN;AACD;AACF;;AAED;;;;;;;;;;;;KAWMC,U;AACJ;AACA,uBAAYC,WAAZ,EAAyB;AAAA;;AACvB,SAAI,CAACV,MAAMW,cAAN,CAAqBD,WAArB,CAAL,EAAwC;AACtC,aAAM,IAAIF,KAAJ,oBAA2BE,WAA3B,oBAAN;AACD;AACDE,YAAOC,cAAP,CAAsB,IAAtB,EAA4B,WAA5B,EAAyC;AACvCC,qBAAc,KADyB;AAEvCC,mBAAY,KAF2B;AAGvCC,iBAAU,KAH6B;AAIvCC,cAAOjB,MAAMU,WAAN;AAJgC,MAAzC;AAMD;;;;6BACOH,G,EAAKU,K,EAAO;AAClBX,kBAAWC,GAAX;AACAU,eAAQC,KAAKC,SAAL,CAAeF,KAAf,CAAR;AACA,YAAKG,SAAL,CAAeC,OAAf,CAAuBd,GAAvB,EAA4BU,KAA5B;AACD;;;6BACOV,G,EAAK;AACXD,kBAAWC,GAAX;AACA,WAAMU,QAAQ,KAAKG,SAAL,CAAeE,OAAf,CAAuBf,GAAvB,CAAd;AACA,cAAOW,KAAKK,KAAL,CAAWN,KAAX,CAAP;AACD;;;gCACUV,G,EAAK;AACdD,kBAAWC,GAAX;AACA,YAAKa,SAAL,CAAeI,UAAf,CAA0BjB,GAA1B;AACD;;;6BACO;AACN,YAAKa,SAAL,CAAeK,KAAf;AACD;;;;;;AAGH;;;;;;;;;AAOA,KAAMC,cAAc;AAClBzB,iBAAc,KADI;AAElBE,mBAAgB,KAFE;AAGlBC,kBAAe,KAHG;AAIlBC,kBAAe;AAJG,EAApB;;AAOA;;;;;;AAMA,KAAIsB,UAAU,IAAd;AACA,KAAIC,qBAAqB,IAAzB;;AAEA;;;;;;;AAOA,KAAMC,gBAAgB;AACpBC,MADoB,iBACd;AACJ,YAAOF,kBAAP;AACD,IAHmB;AAIpBG,MAJoB,eAIhBrB,WAJgB,EAIH;AACf,SAAI,CAACV,MAAMW,cAAN,CAAqBD,WAArB,CAAL,EAAwC;AACtC,aAAM,IAAIF,KAAJ,oBAA2BE,WAA3B,oBAAN;AACD;AACD,aA+MgBsB,OA/MhB,aAAU,IAAIvB,UAAJ,CAAeC,WAAf,CAAV;AACAkB,0BAAqBlB,WAArB;AACD;AAVmB,EAAtB;;AAaA;;;;;;;;;;AAUA,KAAMuB,UAAU;AACdH,QAAK;AAAA,YAAMI,SAASC,MAAf;AAAA,IADS;AAEdJ,QAAK,aAACd,KAAD,EAAW;AAAEiB,cAASC,MAAT,GAAkBlB,KAAlB;AAAyB;AAF7B,EAAhB;;AAKA;;;;;;;;AAQA,UAASb,aAAT,GAAyB;AACvB,OAAMgC,MAAM;AACVf,YADU,mBACFd,GADE,EACGU,KADH,EACUoB,IADV,EAC4B;AAAA,WAAZC,IAAY,uEAAL,GAAK;;AACpC,WAAIC,UAAU,EAAd;AACA,WAAIF,IAAJ,EAAU;AACR,aAAMG,OAAO,IAAIC,IAAJ,EAAb;AACAJ,gBAAOA,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,IAA7B;AACAG,cAAKE,OAAL,CAAaF,KAAKG,OAAL,KAAiBN,IAA9B;AACAE,kCAAuBC,KAAKI,WAAL,EAAvB;AACD;AACDX,eAAQF,GAAR,CAAexB,GAAf,SAAsBsC,mBAAmB5B,KAAnB,CAAtB,GAAkDsB,OAAlD,eAAmED,IAAnE;AACD,MAVS;AAYVhB,YAZU,mBAYFf,GAZE,EAYG;AACX,WAAIU,QAAQ,IAAZ;AACA,WAAM6B,SAAYvC,GAAZ,MAAN;AACA,WAAM4B,SAASF,QAAQH,GAAR,GAAciB,KAAd,CAAoB,GAApB,EAAyBC,IAAzB,CAA8BC,UAA9B,EAA0CH,MAA1C,CAAf;AACA,WAAIX,MAAJ,EAAY;AACV;AACAlB,iBAAQkB,OAAOe,IAAP,GAAcC,SAAd,CAAwBL,OAAOM,MAA/B,EAAuCjB,OAAOiB,MAA9C,CAAR;AACAnC,iBAAQoC,mBAAmBpC,KAAnB,CAAR;AACD;AACD,cAAOA,KAAP;AACD,MAtBS;AAwBVO,eAxBU,sBAwBCjB,GAxBD,EAwBM;AACd6B,WAAIf,OAAJ,CAAYd,GAAZ,EAAiB,EAAjB,EAAqB,CAAC,CAAtB;AACD,MA1BS;AA4BVkB,UA5BU,mBA4BF;AACN,WAAM6B,KAAK,GAAX;AACA,WAAIC,gBAAJ;AAAA,WAAahD,YAAb;AACA0B,eAAQH,GAAR,GAAciB,KAAd,CAAoB,GAApB,EAAyBS,OAAzB,CAAiC,UAACrB,MAAD,EAAY;AAC3CoB,mBAAUpB,OAAOsB,OAAP,CAAeH,EAAf,CAAV;AACA,aAAIC,UAAU,CAAC,CAAf,EAAkB;AAChBhD,iBAAM4B,OAAOgB,SAAP,CAAiB,CAAjB,EAAoBI,OAApB,CAAN;AACA;AACAnB,eAAIZ,UAAJ,CAAejB,IAAI2C,IAAJ,EAAf;AACD;AACF,QAPD;AAQD;AAvCS,IAAZ;AAyCA,UAAOd,GAAP;AACD;;AAED;;;;;;;AAOA,UAASa,UAAT,CAAoBd,MAApB,EAA4B;AAC1B,OAAMW,SAAS,KAAKY,QAAL,EAAf;AACA;AACA,UAAOvB,OAAOe,IAAP,GAAcO,OAAd,CAAsBX,MAAtB,MAAkC,CAAzC;AACD;;AAED;;;;;;;AAOA,UAASa,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,OAAMrD,MAAM,KAAKmD,QAAL,EAAZ;AACA,UAAOE,KAAKrD,GAAL,KAAaA,GAApB;AACD;;AAED;;;;;;;;;AASA,UAASF,aAAT,GAAyB;AACvB,OAAMwD,YAAYC,oBAAlB;AACA,OAAM1B,MAAM;AACVf,YADU,mBACFd,GADE,EACGU,KADH,EACU;AAClB,WAAM2C,OAAOC,UAAUb,IAAV,CAAeW,QAAf,EAAyBpD,GAAzB,CAAb;AACA,WAAIqD,IAAJ,EAAUA,KAAK3C,KAAL,GAAaA,KAAb,CAAV,KACK4C,UAAUE,IAAV,CAAe,EAAExD,QAAF,EAAOU,YAAP,EAAf;AACL+C,wBAAiBH,SAAjB;AACD,MANS;AAOVvC,YAPU,mBAOFf,GAPE,EAOG;AACX,WAAMqD,OAAOC,UAAUb,IAAV,CAAeW,QAAf,EAAyBpD,GAAzB,CAAb;AACA,WAAIqD,IAAJ,EAAU,OAAOA,KAAK3C,KAAZ;AACV,cAAO,IAAP;AACD,MAXS;AAYVO,eAZU,sBAYCjB,GAZD,EAYM;AACd,WAAM0D,QAAQJ,UAAUK,SAAV,CAAoBP,QAApB,EAA8BpD,GAA9B,CAAd;AACA,WAAI0D,QAAQ,CAAC,CAAb,EAAgBJ,UAAUM,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AAChBD,wBAAiBH,SAAjB;AACD,MAhBS;AAiBVpC,UAjBU,mBAiBF;AACNoC,iBAAUT,MAAV,GAAmB,CAAnB;AACAY,wBAAiBH,SAAjB;AACD;AApBS,IAAZ;AAsBA,UAAOzB,GAAP;AACD;;AAED;;;;;;AAMA,UAAS0B,kBAAT,GAA8B;AAC5B,OAAI;AACF,SAAMM,QAAQlD,KAAKK,KAAL,CAAWrB,OAAOmE,IAAP,CAAYC,IAAvB,CAAd;AACA,SAAIF,iBAAiBG,KAArB,EAA4B,OAAOH,KAAP;AAC7B,IAHD,CAGE,OAAOI,CAAP,EAAU,CAAE,CAJc,CAIb;AACf,UAAO,EAAP,CAL4B,CAKjB;AACZ;;AAED;;;;;AAKA,UAASR,gBAAT,CAA0BH,SAA1B,EAAqC;AACnC,OAAMO,QAAQlD,KAAKC,SAAL,CAAe0C,SAAf,CAAd;AACA3D,UAAOmE,IAAP,CAAYC,IAAZ,GAAmBF,KAAnB;AACD;;AAED;;;;;;;AAOA,UAASK,kBAAT,CAA4B/D,WAA5B,EAAyC;AACvC,OAAMgE,aAAa1E,MAAMU,WAAN,CAAnB;AACA,OAAMiE,OAAO,mBAAb;AACA,OAAI;AACFD,gBAAWrD,OAAX,CAAmBsD,IAAnB,EAAyBA,IAAzB;AACAD,gBAAWlD,UAAX,CAAsBmD,IAAtB;AACA,YAAO,IAAP;AACD,IAJD,CAIE,OAAOH,CAAP,EAAU;AACV,YAAO,KAAP;AACD;AACF;;AAED;;;;;;;AAOA,UAASI,gBAAT,CAA0BlE,WAA1B,EAAuC;AACrC,OAAIgB,YAAYhB,WAAZ,CAAJ,EAA8B;AAC5BmB,mBAAcE,GAAd,CAAkBrB,WAAlB;AACD;AACD,UAAOgB,YAAYhB,WAAZ,CAAP;AACD;;AAED;;;;;AAKA,UAASmE,IAAT,GAAgB;AACdnD,eAAYzB,YAAZ,GAA2BwE,mBAAmB,cAAnB,CAA3B;AACA/C,eAAYvB,cAAZ,GAA6BsE,mBAAmB,gBAAnB,CAA7B;AACA/C,eAAYtB,aAAZ,GAA4BqE,mBAAmB,eAAnB,CAA5B;AACA;AACA7D,UAAOkE,IAAP,CAAYpD,WAAZ,EAAyBqD,IAAzB,CAA8BH,gBAA9B;AACD;;AAEDC;;AAEA;SACoB7C,O,GAAXL,O;SAAoBlB,U,GAAAA,U;SAAYoB,a,GAAAA,a;SAAeH,W,GAAAA,W","file":"proxy-storage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"proxyStorage\"] = factory();\n\telse\n\t\troot[\"proxyStorage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4abd76968691b79868f5","/* eslint-disable no-use-before-define, one-var, max-len */\n\n/**\n * This library uses an adapter that implements the Web Storage interface,\n * which is very useful to deal with the lack of compatibility between\n * document.cookie and localStorage and sessionStorage.\n *\n * It also provides a memoryStorage fallback that stores the data in memory\n * when all of above mechanisms are not available.\n *\n * Author: David Rivera\n * Github: https://github.com/jherax\n * License: \"MIT\"\n *\n * You can fork this project on github:\n * https://github.com/jherax/proxy-storage.git\n */\n\n// If you want to support all ES6 features, uncomment the next line\n// import 'babel-polyfill';\n\n/**\n * @private\n *\n * Proxy for Web Storage and Cookies.\n * All members implement the Web Storage interface.\n *\n * @Reference\n * https://developer.mozilla.org/en-US/docs/Web/API/Storage\n *\n * @type {Object}\n */\nconst proxy = {\n  localStorage: window.localStorage,\n  sessionStorage: window.sessionStorage,\n  cookieStorage: cookieStorage(),\n  memoryStorage: memoryStorage(),\n};\n\n/**\n * @private\n *\n * Validates if the key is not empty.\n * (null, undefined or empty string)\n * @param  {String} key\n */\nfunction checkEmpty(key) {\n  if (key == null || key === '') { // eslint-disable-line\n    throw new Error('The key provided can not be empty');\n  }\n}\n\n/**\n * @public\n *\n * Implementation of the Web Storage interface.\n * It saves and retrieves values as JSON.\n *\n * @Reference\n * https://developer.mozilla.org/en-US/docs/Web/API/Storage\n *\n * @type {Class}\n */\nclass WebStorage {\n  // @param {String} storageType: it can be \"localStorage\", \"sessionStorage\", \"cookieStorage\", or \"memoryStorage\"\n  constructor(storageType) {\n    if (!proxy.hasOwnProperty(storageType)) {\n      throw new Error(`Storage type \"${storageType}\" is not valid`);\n    }\n    Object.defineProperty(this, '__storage', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: proxy[storageType],\n    });\n  }\n  setItem(key, value) {\n    checkEmpty(key);\n    value = JSON.stringify(value);\n    this.__storage.setItem(key, value);\n  }\n  getItem(key) {\n    checkEmpty(key);\n    const value = this.__storage.getItem(key);\n    return JSON.parse(value);\n  }\n  removeItem(key) {\n    checkEmpty(key);\n    this.__storage.removeItem(key);\n  }\n  clear() {\n    this.__storage.clear();\n  }\n}\n\n/**\n * @public\n *\n * Determines which storage mechanisms are available.\n *\n * @type {Object}\n */\nconst isAvaliable = {\n  localStorage: false,\n  sessionStorage: false,\n  cookieStorage: false,\n  memoryStorage: true,\n};\n\n/**\n * @public\n *\n * Current storage mechanism.\n * @type {Object}\n */\nlet storage = null;\nlet currentStorageName = null;\n\n/**\n * @public\n *\n * Get/Set the storage mechanism to use by default.\n *\n * @param {String} storageType: it can be \"localStorage\", \"sessionStorage\", \"cookieStorage\", or \"memoryStorage\"\n */\nconst configStorage = {\n  get() {\n    return currentStorageName;\n  },\n  set(storageType) {\n    if (!proxy.hasOwnProperty(storageType)) {\n      throw new Error(`Storage type \"${storageType}\" is not valid`);\n    }\n    storage = new WebStorage(storageType);\n    currentStorageName = storageType;\n  },\n};\n\n/**\n * @private\n *\n * Alias for the default cookie storage associated with the current document.\n *\n * @Reference\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie\n *\n * @type {Object}\n */\nconst $cookie = {\n  get: () => document.cookie,\n  set: (value) => { document.cookie = value },\n};\n\n/**\n * @private\n *\n * Manages actions for creation/reading/deleting cookies.\n * Implements Web Storage interface methods.\n *\n * @return {Object}\n */\nfunction cookieStorage() {\n  const api = {\n    setItem(key, value, days, path = '/') {\n      let expires = '';\n      if (days) {\n        const date = new Date();\n        days = days * 24 * 60 * 60 * 1000;\n        date.setTime(date.getTime() + days);\n        expires = `; expires=${date.toUTCString()}`;\n      }\n      $cookie.set(`${key}=${encodeURIComponent(value)}${expires}; path=${path}`);\n    },\n\n    getItem(key) {\n      let value = null;\n      const nameEQ = `${key}=`;\n      const cookie = $cookie.get().split(';').find(findCookie, nameEQ);\n      if (cookie) {\n        // prevent leading spaces before the key name\n        value = cookie.trim().substring(nameEQ.length, cookie.length);\n        value = decodeURIComponent(value);\n      }\n      return value;\n    },\n\n    removeItem(key) {\n      api.setItem(key, '', -1);\n    },\n\n    clear() {\n      const eq = '=';\n      let indexEQ, key;\n      $cookie.get().split(';').forEach((cookie) => {\n        indexEQ = cookie.indexOf(eq);\n        if (indexEQ > -1) {\n          key = cookie.substring(0, indexEQ);\n          // prevent leading spaces before the key\n          api.removeItem(key.trim());\n        }\n      });\n    },\n  };\n  return api;\n}\n\n/**\n * @private\n *\n * Callback that finds an element in the array.\n * @param  {String} cookie: key=value\n * @return {Boolean}\n */\nfunction findCookie(cookie) {\n  const nameEQ = this.toString();\n  // prevent leading spaces before the key\n  return cookie.trim().indexOf(nameEQ) === 0;\n}\n\n/**\n * @private\n *\n * Callback that finds an element in the array.\n * @param  {Object} item: {key, value}\n * @return {Boolean}\n */\nfunction findItem(item) {\n  const key = this.toString();\n  return item.key === key;\n}\n\n/**\n * @private\n *\n * Manages actions for creation/reading/deleting data in memory.\n * Implements Web Storage interface methods.\n * It also adds a hack to persist the store as a session in the current window.\n *\n * @return {Object}\n */\nfunction memoryStorage() {\n  const hashtable = getStoreFromWindow();\n  const api = {\n    setItem(key, value) {\n      const item = hashtable.find(findItem, key);\n      if (item) item.value = value;\n      else hashtable.push({ key, value });\n      setStoreToWindow(hashtable);\n    },\n    getItem(key) {\n      const item = hashtable.find(findItem, key);\n      if (item) return item.value;\n      return null;\n    },\n    removeItem(key) {\n      const index = hashtable.findIndex(findItem, key);\n      if (index > -1) hashtable.splice(index, 1);\n      setStoreToWindow(hashtable);\n    },\n    clear() {\n      hashtable.length = 0;\n      setStoreToWindow(hashtable);\n    },\n  };\n  return api;\n}\n\n/**\n * @private\n *\n * Gets the hashtable store from the current window.\n * @return {Array}\n */\nfunction getStoreFromWindow() {\n  try {\n    const store = JSON.parse(window.self.name);\n    if (store instanceof Array) return store;\n  } catch (e) {} // eslint-disable-line\n  return []; /* {key,value} */\n}\n\n/**\n * @private\n *\n * Saves the hashtable store in the current window.\n */\nfunction setStoreToWindow(hashtable) {\n  const store = JSON.stringify(hashtable);\n  window.self.name = store;\n}\n\n/**\n * @private\n *\n * Checks whether a storage mechanism is available.\n * @param {String} storageType: it can be \"localStorage\", \"sessionStorage\", \"cookieStorage\", or \"memoryStorage\"\n * @return {Boolean}\n */\nfunction isStorageAvailable(storageType) {\n  const storageObj = proxy[storageType];\n  const data = '__proxy-storage__';\n  try {\n    storageObj.setItem(data, data);\n    storageObj.removeItem(data);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @private\n *\n * Sets the default storage mechanism available.\n * @param {String} storageType: it can be \"localStorage\", \"sessionStorage\", \"cookieStorage\", or \"memoryStorage\"\n * @return {Boolean}\n */\nfunction storageAvaliable(storageType) {\n  if (isAvaliable[storageType]) {\n    configStorage.set(storageType);\n  }\n  return isAvaliable[storageType];\n}\n\n/**\n * @private\n *\n * Initializes the module.\n */\nfunction init() {\n  isAvaliable.localStorage = isStorageAvailable('localStorage');\n  isAvaliable.sessionStorage = isStorageAvailable('sessionStorage');\n  isAvaliable.cookieStorage = isStorageAvailable('cookieStorage');\n  // sets the default storage mechanism available\n  Object.keys(isAvaliable).some(storageAvaliable);\n}\n\ninit();\n\n// @public\nexport { storage as default, WebStorage, configStorage, isAvaliable };\n\n\n\n// WEBPACK FOOTER //\n// ./src/proxy-storage.js"],"sourceRoot":""}