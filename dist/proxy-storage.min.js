!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.proxyStorage=t():e.proxyStorage=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b[e].forEach(function(e){return e.apply(void 0,n)})}function o(e){if(null==e||""===e)throw new Error("The key provided can not be empty")}function i(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e),n=t.date instanceof Date?t.date:new Date;return+t.hours&&n.setHours(n.getHours()+t.hours),+t.days&&n.setDate(n.getDate()+t.days),+t.months&&n.setMonth(n.getMonth()+t.months),+t.years&&n.setFullYear(n.getFullYear()+t.years),n}function u(e){var t=s(e instanceof Date?{date:e}:e);return"; expires="+t.toUTCString()}function c(){var e={setItem:function(e,t,n){var r="",o=void 0;n=Object.assign({path:"/"},n),(a(n.expires)||n.expires instanceof Date)&&(r=u(n.expires)),o=e+"="+encodeURIComponent(t)+r+"; path="+n.path,O.set(o)},getItem:function(e){var t=null,n=e+"=",r=O.get().split(";").find(f,n);return r&&(t=r.trim().substring(n.length,r.length),t=decodeURIComponent(t)),t},removeItem:function(t){e.setItem(t,"",{expires:{days:-1}})},clear:function(){var t="=",n=void 0,r=void 0;O.get().split(";").forEach(function(o){n=o.indexOf(t),n>-1&&(r=o.substring(0,n),e.removeItem(r.trim()))})}};return e}function f(e){var t=this.toString();return 0===e.trim().indexOf(t)}function l(e){var t=this.toString();return e.key===t}function g(){var e=m(),t={setItem:function(t,n){var r=e.find(l,t);r?r.value=n:e.push({key:t,value:n}),p(e)},getItem:function(t){var n=e.find(l,t);return n?n.value:null},removeItem:function(t){var n=e.findIndex(l,t);n>-1&&e.splice(n,1),p(e)},clear:function(){e.length=0,p(e)}};return t}function m(){try{var e=JSON.parse(window.self.name);if(e instanceof Array)return e}catch(e){}return[]}function p(e){var t=JSON.stringify(e);window.self.name=t}function v(e){var t=S[e],n="__proxy-storage__";try{return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}function d(e){return I[e]&&k.set(e),I[e]}function y(){I.localStorage=v("localStorage"),I.sessionStorage=v("sessionStorage"),I.cookieStorage=v("cookieStorage"),Object.keys(I).some(d)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S={localStorage:window.localStorage,sessionStorage:window.sessionStorage,cookieStorage:c(),memoryStorage:g()},b={setItem:[],getItem:[],removeItem:[],clear:[]},WebStorage=function(){function WebStorage(e){if(n(this,WebStorage),!S.hasOwnProperty(e))throw new Error('Storage type "'+e+'" is not valid');i(this,"__storage",S[e])}return h(WebStorage,[{key:"setItem",value:function(e,t,n){o(e),this[e]=t,r("setItem",e,t,n),t=JSON.stringify(t),this.__storage.setItem(e,t,n)}},{key:"getItem",value:function(e){o(e),r("getItem",e);var t=JSON.parse(this.__storage.getItem(e));return t}},{key:"removeItem",value:function(e){o(e),delete this[e],r("removeItem",e),this.__storage.removeItem(e)}},{key:"clear",value:function(){var e=this;r("clear"),Object.keys(this).forEach(function(t){return delete e[t]}),this.__storage.clear()}},{key:"length",get:function(){return Object.keys(this).length}}],[{key:"interceptors",value:function(e,t){e in b&&"function"==typeof t&&b[e].push(t)}}]),WebStorage}(),I={localStorage:!1,sessionStorage:!1,cookieStorage:!1,memoryStorage:!0},w=null,x=null,k={get:function(){return x},set:function(e){if(!S.hasOwnProperty(e))throw new Error('Storage type "'+e+'" is not valid');t.default=w=new WebStorage(e),x=e}},O={get:function(){return document.cookie},set:function(e){document.cookie=e}};y(),t.default=w,t.WebStorage=WebStorage,t.configStorage=k,t.isAvaliable=I}])});
//# sourceMappingURL=proxy-storage.min.js.map