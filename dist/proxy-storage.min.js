!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.proxyStorage=t():e.proxyStorage=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){for(var t in e)"initialize"!==t&&r(e,t);return e.initialize(),delete e.initialize,e}function r(e,t,n){var o={configurable:!1,enumerable:!1,writable:!1};"undefined"!=typeof n&&(o.value=n),Object.defineProperty(e,t,o)}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];w[e].forEach(function(e){return e.apply(void 0,n)})}function a(e){if(null==e||""===e)throw new Error("The key provided can not be empty")}function u(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e),n=t.date instanceof Date?t.date:new Date;return+t.hours&&n.setHours(n.getHours()+t.hours),+t.days&&n.setDate(n.getDate()+t.days),+t.months&&n.setMonth(n.getMonth()+t.months),+t.years&&n.setFullYear(n.getFullYear()+t.years),n}function c(e){var t=s(e instanceof Date?{date:e}:e);return"; expires="+t.toUTCString()}function f(e){var t=this.toString();return 0===e.trim().indexOf(t)}function l(){var e={setItem:function(e,t,n){var o="",r=void 0;n=Object.assign({path:"/"},n),(u(n.expires)||n.expires instanceof Date)&&(o=c(n.expires)),r=e+"="+encodeURIComponent(t)+o+"; path="+n.path,x.set(r)},getItem:function(e){var t=null,n=e+"=",o=x.get().split(";").find(f,n);return o&&(t=o.trim().substring(n.length,o.length),t=decodeURIComponent(t)),t},removeItem:function(t){e.setItem(t,"",{expires:{days:-1}})},clear:function(){var t="=",n=void 0,o=void 0;x.get().split(";").forEach(function(r){n=r.indexOf(t),n>-1&&(o=r.substring(0,n),e.removeItem(o.trim()))})},initialize:function(){x.get().split(";").forEach(function(t){var n=t.indexOf("="),o=t.substring(0,n).trim(),r=t.substring(n+1).trim();o&&(e[o]=decodeURIComponent(r))})}};return e}function p(){var e=g(),t={setItem:function(t,n){e[t]=n,d(e)},getItem:function(t){var n=e[t];return void 0===n?null:n},removeItem:function(t){delete e[t],d(e)},clear:function(){Object.keys(e).forEach(function(t){return delete e[t]}),d(e)},initialize:function(){Object.assign(t,e)}};return t}function g(){try{var e=JSON.parse(window.self.name);if(e&&"object"===("undefined"==typeof e?"undefined":h(e)))return e}catch(e){return{}}}function d(e){var t=JSON.stringify(e);window.self.name=t}function m(e){var t=O[e],n="__proxy-storage__";try{return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}function y(e){return _[e]&&k.set(e),_[e]}function v(){_.localStorage=m("localStorage"),_.sessionStorage=m("sessionStorage"),_.cookieStorage=m("cookieStorage"),Object.keys(_).some(y)}Object.defineProperty(t,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),S=null,_={localStorage:!1,sessionStorage:!1,cookieStorage:!1,memoryStorage:!0},x={get:function(){return document.cookie},set:function(e){document.cookie=e}},I={},O={localStorage:window.localStorage,sessionStorage:window.sessionStorage,cookieStorage:o(l()),memoryStorage:o(p())},w={setItem:[],getItem:[],removeItem:[],clear:[]},WebStorage=function(){function WebStorage(e){var t=this;if(n(this,WebStorage),!O.hasOwnProperty(e))throw new Error('Storage type "'+e+'" is not valid');return I[e]?I[e]:(r(this,"__storage__",e),Object.keys(O[e]).forEach(function(n){var o=O[e][n];try{t[n]=JSON.parse(o)}catch(e){t[n]=o}},this),void(I[e]=this))}return b(WebStorage,[{key:"setItem",value:function(e,t,n){a(e),this[e]=t,i("setItem",e,t,n),t=JSON.stringify(t),O[this.__storage__].setItem(e,t,n)}},{key:"getItem",value:function(e){a(e);var t=O[this.__storage__].getItem(e);return t=void 0===t?null:JSON.parse(t),i("getItem",e,t),t}},{key:"removeItem",value:function(e){a(e),delete this[e],i("removeItem",e),O[this.__storage__].removeItem(e)}},{key:"clear",value:function(){var e=this;i("clear"),Object.keys(this).forEach(function(t){delete e[t]},this),O[this.__storage__].clear()}},{key:"length",get:function(){return Object.keys(this).length}}],[{key:"interceptors",value:function(e,t){e in w&&"function"==typeof t&&w[e].push(t)}}]),WebStorage}(),k={get:function(){return S.__storage__},set:function(e){if(!O.hasOwnProperty(e))throw new Error('Storage type "'+e+'" is not valid');t.default=S=new WebStorage(e)}};v(),t.default=S,t.WebStorage=WebStorage,t.configStorage=k,t.isAvaliable=_}])})}])});
//# sourceMappingURL=proxy-storage.min.js.map